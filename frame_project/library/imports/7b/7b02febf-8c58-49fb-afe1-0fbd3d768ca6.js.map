{"version":3,"sources":["assets\\homePage\\script\\common\\AnimationCol.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mCAA8B;AAExB,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C,IAAY,aAOX;AAPD,WAAY,aAAa;IACrB,8BAAa,CAAA;IACb,8BAAa,CAAA;IACb,yCAAwB,CAAA;IACxB,sCAAqB,CAAA;IACrB,gCAAe,CAAA;IACf,kCAAiB,CAAA;AACrB,CAAC,EAPW,aAAa,GAAb,qBAAa,KAAb,qBAAa,QAOxB;AAGD;IAA0C,gCAAY;IAAtD;QAAA,qEAkDC;QA/CG,UAAI,GAAiB,IAAI,CAAC;QAG1B,mBAAa,GAAY,IAAI,CAAC;QAG9B,iBAAW,GAAW,CAAC,CAAC;QAGxB,WAAK,GAAW,CAAC,CAAC;QAGlB,kBAAY,GAAY,IAAI,CAAC;;IAmCjC,CAAC;IAjCa,+BAAQ,GAAlB;QACI,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SAC3C;IACL,CAAC;IAED,2BAAI,GAAJ,UAAK,WAAoB,EAAE,KAAiB,EAAE,EAAqB;QAAnE,iBAqBC;QArB0B,sBAAA,EAAA,SAAiB;QAAE,mBAAA,EAAA,SAAqB;QAC/D,IAAI,CAAC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,EAAE;YAChD,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;SAClC;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;QACjC,IAAI,KAAK,GAAG;YACR,EAAE,IAAI,EAAE,EAAE,CAAC;QACf,CAAC,CAAA;QACD,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,KAAK,GAAG;gBACJ,EAAE,IAAI,EAAE,EAAE,CAAC;gBACX,KAAI,CAAC,WAAW,EAAE,CAAC;YACvB,CAAC,CAAA;SACJ;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QACpD,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;QACxB,IAAI,WAAW,IAAI,GAAG,EAAE;YACpB,SAAS,CAAC,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC;SACzC;aAAM,IAAI,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE;YAC7B,SAAS,CAAC,WAAW,GAAG,WAAW,CAAC;SACvC;IACL,CAAC;IAED,kCAAW,GAAX;QACI,uBAAuB;QACvB,gBAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IA9CD;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;8CACG;IAG1B;QADC,QAAQ;uDACqB;IAG9B;QADC,QAAQ;qDACe;IAGxB;QADC,QAAQ;+CACS;IAGlB;QADC,QAAQ;sDACoB;IAfZ,YAAY;QADhC,OAAO;OACa,YAAY,CAkDhC;IAAD,mBAAC;CAlDD,AAkDC,CAlDyC,EAAE,CAAC,SAAS,GAkDrD;kBAlDoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import MyPool from \"./MyPool\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport enum AnimEventEnum {\r\n    PLAY = \"play\",\r\n    STOP = \"stop\",\r\n    LASTGFRAME = \"lastframe\",\r\n    FINISHED = \"finished\",\r\n    PAUSE = \"pause\",\r\n    RESUME = \"resume\"\r\n}\r\n\r\n@ccclass\r\nexport default class AnimationCol extends cc.Component {\r\n\r\n    @property(cc.Animation)\r\n    anim: cc.Animation = null;\r\n\r\n    @property\r\n    finishDestroy: boolean = true;\r\n\r\n    @property\r\n    repeatTimes: number = 1;\r\n\r\n    @property\r\n    speed: number = 1;\r\n\r\n    @property\r\n    playOnEnable: boolean = true;\r\n\r\n    protected onEnable(): void {\r\n        if (this.playOnEnable) {\r\n            this.play(this.repeatTimes, this.speed);\r\n        }\r\n    }\r\n\r\n    play(repeatTimes?: number, speed: number = 1, cb: () => void = null) {\r\n        if (!repeatTimes || !Number.isInteger(repeatTimes)) {\r\n            repeatTimes = this.repeatTimes;\r\n        }\r\n        let animState = this.anim.play();\r\n        let endCb = () => {\r\n            cb && cb();\r\n        }\r\n        if (this.finishDestroy) {\r\n            endCb = () => {\r\n                cb && cb();\r\n                this.destroySelf();\r\n            }\r\n        }\r\n        this.anim.once(AnimEventEnum.FINISHED, endCb, this);\r\n        animState.speed = speed;\r\n        if (repeatTimes >= 999) {\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n        } else if (this.repeatTimes > 1) {\r\n            animState.repeatCount = repeatTimes;\r\n        }\r\n    }\r\n\r\n    destroySelf() {\r\n        // this.node.destroy();\r\n        MyPool.putObj(this.node);\r\n    }\r\n}\r\n"]}