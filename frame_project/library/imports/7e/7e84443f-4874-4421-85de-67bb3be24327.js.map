{"version":3,"sources":["assets\\homePage\\script\\common\\MyToggle.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import MyPool from \"./MyPool\";\r\nimport MyToggleBtn from \"./MyToggleBtn\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MyToggle extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    btnNodes: cc.Node[] = [];\r\n\r\n    @property({ displayName: \"点击事件\", type: cc.Component.EventHandler })\r\n    events: cc.Component.EventHandler[] = [];\r\n\r\n    @property({ displayName: \"是否手动初始化\" })\r\n    isHandInit: boolean = false;\r\n\r\n    @property({ type: cc.Prefab, visible() { return this.isHandInit } })\r\n    toggleBtnPre: cc.Prefab = null;\r\n\r\n    public isLock: boolean = false;\r\n\r\n    protected onLoad(): void {\r\n        if (!this.isHandInit) {\r\n            this.btnInit();\r\n        }\r\n    }\r\n\r\n    btnInit() {\r\n        for (let i = 0; i < this.btnNodes.length; i++) {\r\n            let btnNode = this.btnNodes[i];\r\n            let handler = new cc.Component.EventHandler();\r\n            handler.target = this.node;\r\n            handler.component = \"MyToggle\";\r\n            handler.handler = \"btnClick\";\r\n            handler.customEventData = i + \"\";\r\n            let btn = btnNode.getComponent(cc.Button);\r\n            btn.clickEvents.push(handler);\r\n        }\r\n    }\r\n\r\n    handInit(tagArr: string[]) {\r\n        if (tagArr.length <= 0 || !this.toggleBtnPre) return;\r\n        this.btnNodes.forEach(v => {\r\n            MyPool.putObj(v);\r\n        })\r\n        this.btnNodes = [];\r\n        tagArr.forEach((v, k) => {\r\n            let btn = MyPool.getObj(this.toggleBtnPre);\r\n            btn.parent = this.node;\r\n            let btnSrc = btn.getComponent(MyToggleBtn);\r\n            if (btnSrc) {\r\n                btnSrc.init(v);\r\n            }\r\n            this.btnNodes.push(btn);\r\n        })\r\n        this.btnInit();\r\n    }\r\n\r\n    btnClick(event, data: string) {\r\n        if (this.isLock) return;\r\n        this.emit(Number(data));\r\n    }\r\n\r\n    selectEmpty() {\r\n        for (let i = 0; i < this.btnNodes.length; i++) {\r\n            let btn = this.btnNodes[i];\r\n            btn.children[1].active = false;\r\n        }\r\n    }\r\n\r\n    emit(btnIndex: number) {\r\n        for (let i = 0; i < this.btnNodes.length; i++) {\r\n            let btn = this.btnNodes[i];\r\n            btn.children[1].active = i == btnIndex;\r\n        }\r\n        this.events.forEach((value: cc.Component.EventHandler, index: number, array: cc.Component.EventHandler[]) => {\r\n            value.emit([value, btnIndex]);\r\n        });\r\n    }\r\n}\r\n"]}