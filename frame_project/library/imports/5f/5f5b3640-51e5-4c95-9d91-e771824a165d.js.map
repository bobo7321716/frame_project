{"version":3,"sources":["assets\\homePage\\script\\common\\CommonTip.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AbManager } from \"../manager/AbManager\";\r\nimport { BundleName } from \"./BundleName\";\r\nimport MyPool from \"./MyPool\";\r\nimport { Util } from \"./Util\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class CommonTip extends cc.Component {\r\n\r\n    @property({\r\n        type: cc.Label\r\n    })\r\n    protected tipText: cc.Label = null;\r\n\r\n    private isOnAnim: boolean = false;\r\n\r\n    init() {\r\n        return AbManager.loadBundleRes(BundleName.Font, \"/方正隶二简体\", cc.Font).then((font) => {\r\n            if (!Util.isValid(this.node)) return;\r\n            this.tipText.font = font;\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 显示提示框\r\n     * @param tipInfo 需要显示的文字信息 \r\n     */\r\n    show(tipInfo: string): void {\r\n        if (tipInfo == null) {\r\n            return;\r\n        }\r\n        this.init().then(() => {\r\n            this.node.opacity = 255;\r\n            this.tipText.string = tipInfo;\r\n            this.isOnAnim = false;\r\n\r\n            (this.tipText as any)._forceUpdateRenderData();\r\n            if (this.tipText.node.width >= 500) {\r\n                this.tipText.node.width = 500;\r\n                this.tipText.overflow = cc.Label.Overflow.RESIZE_HEIGHT;\r\n                (this.tipText as any)._forceUpdateRenderData();\r\n            }\r\n\r\n            let width = this.tipText.node.width + 100;\r\n            let height = this.tipText.node.height + 30;\r\n            this.node.setContentSize(width, height);\r\n            this.scheduleOnce(() => {\r\n                this.destroySelf();\r\n            }, 3)\r\n        })\r\n    }\r\n\r\n    animEndCall() {\r\n        this.isOnAnim = false;\r\n    }\r\n\r\n    hide() {\r\n        let hideAnim = () => {\r\n            cc.tween(this.node)\r\n                .by(0.5, { y: 200, opacity: -255 })\r\n                .removeSelf()\r\n                .start()\r\n        }\r\n        if (this.isOnAnim) {\r\n            this.animEndCall = () => {\r\n                hideAnim();\r\n            }\r\n        } else {\r\n            this.isOnAnim = true;\r\n            hideAnim();\r\n        }\r\n    }\r\n\r\n    topMove() {\r\n        if (this.isOnAnim) {\r\n            return;\r\n        }\r\n        this.isOnAnim = true;\r\n        cc.tween(this.node)\r\n            .by(0.1, { y: this.node.height + 10 })\r\n            .call(this.animEndCall.bind(this))\r\n            .start()\r\n    }\r\n\r\n    destroySelf() {\r\n        this.unscheduleAllCallbacks();\r\n        this.tipText.string = \"\";\r\n        this.node.stopAllActions();\r\n        this.isOnAnim = false;\r\n        MyPool.putObj(this.node);\r\n    }\r\n}\r\n"]}