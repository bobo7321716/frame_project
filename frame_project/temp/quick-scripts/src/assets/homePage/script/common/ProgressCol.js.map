{"version":3,"sources":["assets\\homePage\\script\\common\\ProgressCol.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAyC,+BAAY;IAArD;QAAA,qEAsEC;QAnEG,cAAQ,GAAmB,IAAI,CAAC;QAGhC,SAAG,GAAc,IAAI,CAAC;QAGtB,YAAM,GAAa,IAAI,CAAC;QAGxB,YAAM,GAAa,IAAI,CAAC;QAGxB,YAAM,GAAY,KAAK,CAAC;QAEhB,WAAK,GAAW,CAAC,CAAC;QAClB,YAAM,GAAW,CAAC,CAAC;QACnB,cAAQ,GAAY,KAAK,CAAC;QAC1B,WAAK,GAAW,EAAE,CAAC;QACnB,YAAM,GAAW,CAAC,CAAC;QACnB,QAAE,GAAe,IAAI,CAAC;QACtB,SAAG,GAAW,CAAC,CAAC;;IA+C5B,CAAC;IA7CG,0BAAI,GAAJ,UAAK,KAAa;QACd,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAED,4BAAM,GAAN,UAAO,SAAiB,EAAE,MAAuB,EAAE,EAAqB;QAA9C,uBAAA,EAAA,cAAuB;QAAE,mBAAA,EAAA,SAAqB;QACpE,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,GAAG,GAAG,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;YACb,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACtE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB;aAAM;YACH,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACtE,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;IACL,CAAC;IAED,+BAAS,GAAT,UAAU,GAAW,EAAE,MAAuB,EAAE,EAAqB;QAA9C,uBAAA,EAAA,cAAuB;QAAE,mBAAA,EAAA,SAAqB;QACjE,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;YACb,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB;aAAM;YACH,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;IACL,CAAC;IAEO,gCAAU,GAAlB;QACI,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;QAC9C,IAAI,IAAI,CAAC,MAAM;YAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;QACnJ,IAAI,IAAI,CAAC,MAAM;YAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC;IAChH,CAAC;IAES,4BAAM,GAAhB,UAAiB,EAAU;QACvB,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC3B,IAAI,CAAC,MAAM,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC;QAC1C,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;YAC7F,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAC1B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,EAAE,CAAC;SACxB;QACD,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAlED;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;iDACO;IAGhC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACE;IAGtB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACK;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACK;IAGxB;QADC,QAAQ,CAAC,EAAE,WAAW,EAAE,QAAQ,EAAE,CAAC;+CACZ;IAfP,WAAW;QAD/B,OAAO;OACa,WAAW,CAsE/B;IAAD,kBAAC;CAtED,AAsEC,CAtEwC,EAAE,CAAC,SAAS,GAsEpD;kBAtEoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ProgressCol extends cc.Component {\r\n\r\n    @property(cc.ProgressBar)\r\n    progress: cc.ProgressBar = null;\r\n\r\n    @property(cc.Sprite)\r\n    bar: cc.Sprite = null;\r\n\r\n    @property(cc.Label)\r\n    proLab: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    numLab: cc.Label = null;\r\n\r\n    @property({ displayName: \"是否向上取整\" })\r\n    isCeil: boolean = false;\r\n\r\n    private total: number = 0;\r\n    private curNum: number = 0;\r\n    private isOnAnim: boolean = false;\r\n    private speed: number = 10;\r\n    private tarNum: number = 0;\r\n    private cb: () => void = null;\r\n    private dir: number = 1;\r\n\r\n    init(total: number) {\r\n        this.curNum = this.total = total;\r\n        this.refreshBar();\r\n    }\r\n\r\n    change(changeNum: number, isAnim: boolean = false, cb: () => void = null) {\r\n        if (isAnim) {\r\n            this.dir = changeNum > 0 ? 1 : -1;\r\n            this.cb = cb;\r\n            this.tarNum = cc.misc.clampf(this.curNum += changeNum, 0, this.total);\r\n            this.isOnAnim = true;\r\n        } else {\r\n            this.curNum = cc.misc.clampf(this.curNum += changeNum, 0, this.total);\r\n            this.refreshBar();\r\n        }\r\n    }\r\n\r\n    setCurNum(num: number, isAnim: boolean = false, cb: () => void = null) {\r\n        if (isAnim) {\r\n            this.dir = num > this.curNum ? 1 : -1;\r\n            this.cb = cb;\r\n            this.tarNum = cc.misc.clampf(num, 0, this.total);\r\n            this.isOnAnim = true;\r\n        } else {\r\n            this.curNum = cc.misc.clampf(num, 0, this.total);\r\n            this.refreshBar();\r\n        }\r\n    }\r\n\r\n    private refreshBar() {\r\n        this.bar.fillRange = this.curNum / this.total;\r\n        if (this.proLab) this.proLab.string = (this.isCeil ? Math.ceil(this.curNum / this.total * 100) : Math.floor(this.curNum / this.total * 100)) + \"%\";\r\n        if (this.numLab) this.numLab.string = (this.isCeil ? Math.ceil(this.curNum) : Math.floor(this.curNum)) + \"\";\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (!this.isOnAnim) return;\r\n        this.curNum += dt * this.speed * this.dir;\r\n        if (this.dir == 1 && this.curNum >= this.tarNum || this.dir == -1 && this.curNum <= this.tarNum) {\r\n            this.curNum = this.tarNum;\r\n            this.isOnAnim = false;\r\n            this.cb && this.cb();\r\n        }\r\n        this.refreshBar();\r\n    }\r\n}\r\n"]}