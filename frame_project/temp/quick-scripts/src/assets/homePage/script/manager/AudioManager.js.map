{"version":3,"sources":["assets\\homePage\\script\\manager\\AudioManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { BundleData } from \"../common/BundleData\";\r\nimport { PlayerData } from \"../common/PlayerData\";\r\nimport { SoundPath } from \"../common/SoundPath\";\r\nimport { Util } from \"../common/Util\";\r\nimport { AbManager } from \"./AbManager\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class AudioManager extends cc.Component {\r\n\r\n    @property(cc.AudioSource)\r\n    audioSource: cc.AudioSource = null;\r\n\r\n    private curEffectId: number = null;\r\n\r\n    private curAudioId: number = null;\r\n\r\n    private curBgmArg: { path: string, clip: cc.AudioClip } = { path: null, clip: null };\r\n\r\n    private commonAudioPath: string[] = [\"res/audios/click\", \"res/audios/open\", \"res/audios/close\"];\r\n\r\n    public static ins: AudioManager = null;\r\n\r\n    private soundIds = new Map<string, number>();\r\n\r\n    protected onLoad(): void {\r\n        AudioManager.ins = this;\r\n    }\r\n\r\n    playClickAudio() {\r\n        this.playEffect(SoundPath.button_click);\r\n    }\r\n\r\n    /**\r\n     * 播放背景音乐\r\n     * @returns \r\n     */\r\n    playBgm(audioData: BundleData, isloop: boolean = true, cb: () => void = null) {\r\n        if (!PlayerData.ins.isPlayMusic) {\r\n            return;\r\n        }\r\n        let bundleName = audioData.bundle;\r\n        let path = audioData.url;\r\n        if (cc.audioEngine.isMusicPlaying() && this.curBgmArg.path && this.curBgmArg.path == path) {\r\n\r\n        } else {\r\n            this.stopBgm();\r\n            AbManager.loadBundleRes(bundleName, path, cc.AudioClip).then((clip) => {\r\n                if (!Util.isValid(this.node)) return;\r\n                if (clip) {\r\n                    let bgmId = cc.audioEngine.playMusic(clip, isloop);\r\n                    if (cb) {\r\n                        cc.audioEngine.setFinishCallback(bgmId, cb);\r\n                    }\r\n                    this.curBgmArg.path = path;\r\n                    this.curBgmArg.clip = clip;\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 停止bgm\r\n     */\r\n    stopBgm() {\r\n        cc.audioEngine.stopMusic();\r\n        AbManager.isAutoReleaseAsset && this.curBgmArg.clip && this.curBgmArg.clip.decRef();\r\n        this.curBgmArg = { path: null, clip: null };\r\n    }\r\n\r\n    //暂停bgm\r\n    pauseBgm() {\r\n        cc.audioEngine.pauseMusic();\r\n    }\r\n\r\n    //恢复bgm\r\n    resumeBgm() {\r\n        if (!PlayerData.ins.isPlayMusic) {\r\n            return;\r\n        }\r\n        cc.audioEngine.resumeMusic();\r\n    }\r\n\r\n    /**\r\n     * 播放音效\r\n     */\r\n    playEffect(audioData: BundleData, isloop: boolean = false, cb: () => void = null) {\r\n        if (!PlayerData.ins.isPlayAudio) {\r\n            cb && cb();\r\n            return;\r\n        }\r\n        // console.warn(\"playEffect \", audioData);\r\n        let bundleName = audioData.bundle;\r\n        let path = audioData.url;\r\n        AbManager.loadBundleRes(bundleName, path, cc.AudioClip).then((clip) => {\r\n            if (!Util.isValid(this.node)) return;\r\n            if (clip) {\r\n                let audioID;\r\n                if (this.commonAudioPath.indexOf(path) > 0) {\r\n                    audioID = cc.audioEngine.playEffect(clip, isloop);\r\n                } else {\r\n                    audioID = cc.audioEngine.playEffect(clip, isloop);\r\n                    this.curEffectId = audioID;\r\n                }\r\n\r\n                this.stopEffectByBundleData(audioData);\r\n                this.addSoundId(audioData, audioID);\r\n                cc.audioEngine.setFinishCallback(audioID, () => {\r\n                    AbManager.isAutoReleaseAsset && clip.decRef();\r\n                    cb && cb();\r\n                    this.delSoundId(audioData);\r\n                });\r\n            } else {\r\n                cb && cb();\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 停止播放音效\r\n     */\r\n    public stopEffect(): void {\r\n        if (this.curEffectId == null) {\r\n            return;\r\n        }\r\n        cc.audioEngine.stopEffect(this.curEffectId);\r\n        this.curEffectId = null;\r\n\r\n        this.delSoundIdById(this.curEffectId);\r\n    }\r\n\r\n    public stopEffectByBundleData(audioData: BundleData): void {\r\n\r\n        const audioID = this.getSoundId(audioData);\r\n        if (audioID != null) {\r\n            cc.audioEngine.stopEffect(audioID);\r\n            this.delSoundId(audioData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 停止所有音效\r\n     */\r\n    public stopAllEffect() {\r\n        cc.audioEngine.stopAllEffects();\r\n        this.curEffectId = null;\r\n        this.soundIds.clear();\r\n    }\r\n\r\n    /**\r\n     * 暂停音效\r\n     */\r\n\r\n    public pauseEffect() {\r\n        if (this.curEffectId == null) {\r\n            return;\r\n        }\r\n        cc.audioEngine.pauseEffect(this.curEffectId);\r\n    }\r\n\r\n    public pauseEffectByBundleData(audioData: BundleData): void {\r\n        const audioID = this.getSoundId(audioData);\r\n        if (audioID != null) {\r\n            cc.audioEngine.pauseEffect(audioID);\r\n        }\r\n    }\r\n\r\n    /**恢复音效 */\r\n    public resumeEffect() {\r\n        if (!PlayerData.ins.isPlayAudio) {\r\n            return;\r\n        }\r\n        if (this.curEffectId == null) {\r\n            return;\r\n        }\r\n        cc.audioEngine.resumeEffect(this.curEffectId);\r\n    }\r\n\r\n    public resumeEffectByBundleData(audioData: BundleData): void {\r\n        if (!PlayerData.ins.isPlayAudio) {\r\n            return;\r\n        }\r\n        const audioID = this.getSoundId(audioData);\r\n        if (audioID != null) {\r\n            cc.audioEngine.resumeEffect(audioID);\r\n        }\r\n    }\r\n\r\n    /**播放音频，设置开始比例 */\r\n    playEffectPro(audioData: BundleData, isloop: boolean = false, cb: () => void = null, startPro: number = 0) {\r\n        if (!PlayerData.ins.isPlayAudio) {\r\n            cb && cb();\r\n            return;\r\n        }\r\n        let bundleName = audioData.bundle;\r\n        let path = audioData.url\r\n        AbManager.loadBundleRes(bundleName, path, cc.AudioClip).then((clip) => {\r\n            if (!Util.isValid(this.node)) return;\r\n            const audioID = cc.audioEngine.playEffect(clip, isloop);\r\n            let dur = cc.audioEngine.getDuration(audioID);\r\n            cc.audioEngine.setCurrentTime(audioID, startPro * dur);\r\n            this.curEffectId = audioID;\r\n            this.stopEffectByBundleData(audioData);\r\n            this.addSoundId(audioData, audioID);\r\n            cc.audioEngine.setFinishCallback(audioID, () => {\r\n                cb && cb();\r\n                this.delSoundId(audioData);\r\n            });\r\n        }).catch((err) => {\r\n            console.log(\"err\");\r\n            cb && cb();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 播放音频\r\n     */\r\n    playAudio(audioData: BundleData, isloop: boolean = false, cb: () => void = null) {\r\n        if (!PlayerData.ins.isPlayAudio) {\r\n            cb && cb();\r\n            return;\r\n        }\r\n        // console.warn(\"playAudio \", audioData);\r\n        let bundleName = audioData.bundle;\r\n        let path = audioData.url;\r\n        AbManager.loadBundleRes(bundleName, path, cc.AudioClip).then((clip) => {\r\n            if (!Util.isValid(this.node)) return;\r\n            if (clip) {\r\n                const audioID = cc.audioEngine.play(clip, isloop, 1);\r\n                this.curAudioId = audioID;\r\n                this.stopAudioByBundleData(audioData);\r\n                this.addSoundId(audioData, audioID);\r\n                cc.audioEngine.setFinishCallback(audioID, () => {\r\n                    cb && cb();\r\n                    this.delSoundId(audioData);\r\n                });\r\n            } else {\r\n                cb && cb();\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 停止播放音频\r\n     */\r\n    public stopAudio(): void {\r\n        if (this.curAudioId == null) {\r\n            return;\r\n        }\r\n        cc.audioEngine.stop(this.curAudioId);\r\n        this.curAudioId = null;\r\n\r\n        this.delSoundIdById(this.curAudioId)\r\n    }\r\n\r\n    public stopAudioByBundleData(audioData: BundleData): void {\r\n        const audioID = this.getSoundId(audioData);\r\n        if (audioID != null) {\r\n            cc.audioEngine.stop(audioID);\r\n            this.delSoundId(audioData);\r\n        }\r\n    }\r\n\r\n    public pauseAudio() {\r\n        if (this.curAudioId == null) {\r\n            return;\r\n        }\r\n        cc.audioEngine.pause(this.curAudioId);\r\n    }\r\n\r\n    public pauseAudioByBundleData(audioData: BundleData): void {\r\n        const audioID = this.getSoundId(audioData);\r\n        if (audioID != null) {\r\n            cc.audioEngine.pause(audioID);\r\n        }\r\n    }\r\n\r\n    public resumeAudio() {\r\n        if (this.curAudioId == null) {\r\n            return;\r\n        }\r\n        cc.audioEngine.resume(this.curAudioId);\r\n    }\r\n\r\n    public resumeAudioByBundleData(audioData: BundleData): void {\r\n        const audioID = this.getSoundId(audioData);\r\n        if (audioID != null) {\r\n            cc.audioEngine.resume(audioID);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 通过audioSource播放音频\r\n     */\r\n    public playAudioBySource(audioData: BundleData, isloop: boolean = false) {\r\n        if (!this.audioSource) {\r\n            console.warn(\"audioSource is empty\");\r\n            return;\r\n        }\r\n        if (!PlayerData.ins.isPlayAudio) {\r\n            return;\r\n        }\r\n        let bundleName = audioData.bundle;\r\n        let path = audioData.url;\r\n\r\n        AbManager.loadBundleRes(bundleName, path, cc.AudioClip).then((clip) => {\r\n            if (!Util.isValid(this.node)) return;\r\n            if (clip) {\r\n                this.stopAudioSource();\r\n                this.audioSource.clip = clip;\r\n                this.audioSource.loop = isloop;\r\n                this.audioSource.play();\r\n            }\r\n        })\r\n    }\r\n\r\n    public stopAudioSource() {\r\n        if (!this.audioSource) {\r\n            return;\r\n        }\r\n        if (this.audioSource.isPlaying) {\r\n            this.audioSource.stop();\r\n        }\r\n    }\r\n\r\n    public pauseAudioSource() {\r\n        if (!this.audioSource) {\r\n            return;\r\n        }\r\n        if (this.audioSource.isPlaying) {\r\n            this.audioSource.pause();\r\n        }\r\n    }\r\n\r\n    public resumeAudioSource() {\r\n        if (!this.audioSource) {\r\n            return;\r\n        }\r\n        this.audioSource.resume();\r\n    }\r\n\r\n    public stopAllSound() {\r\n        this.stopAllEffect();\r\n        this.stopAudio();\r\n        this.stopAudioSource();\r\n        this.stopBgm();\r\n    }\r\n\r\n    public pauseAllSound() {\r\n        this.pauseEffect();\r\n        this.pauseAudio();\r\n        this.pauseBgm();\r\n        this.pauseAudioSource();\r\n    }\r\n\r\n    public resumeAllSound() {\r\n        this.resumeEffect();\r\n        this.resumeAudio();\r\n        this.resumeBgm();\r\n        this.resumeAudioSource();\r\n    }\r\n\r\n    private addSoundId(audioData: BundleData, audioId) {\r\n        const key = audioData.bundle + audioData.url;\r\n        this.soundIds.set(key, audioId);\r\n    }\r\n    private hasSoundId(audioData: BundleData) {\r\n        const key = audioData.bundle + audioData.url;\r\n        return this.soundIds.has(key);\r\n    }\r\n    private delSoundId(audioData: BundleData) {\r\n        const key = audioData.bundle + audioData.url;\r\n        this.soundIds.delete(key);\r\n    }\r\n    private getSoundId(audioData: BundleData) {\r\n        const key = audioData.bundle + audioData.url;\r\n        return this.soundIds.get(key);\r\n    }\r\n    private delSoundIdById(audioID) {\r\n        this.soundIds.forEach((value, key) => {\r\n            if (audioID == value) {\r\n                this.soundIds.delete(key);\r\n            }\r\n        })\r\n    }\r\n}\r\n"]}